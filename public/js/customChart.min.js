var createLineChart=function(t,a){function e(){return d3.svg.axis().scale(c).orient("left").ticks(5)}if($(window).width()<768)var r=200;else var r=300;1==t.length&&t.push(t[0]);var n=d3.select("#main-content").node(),l=a,o=(d3.select("#linechart-homepage").append("svg").attr("width",l+1).attr("height",r).attr("id","visualization"),d3.select("#visualization")),i={top:20,right:20,bottom:20,left:50},s=d3.scale.ordinal().rangeRoundBands([0,l-50],0),c=d3.scale.linear().range([r-i.top,i.bottom]),d=d3.svg.axis().orient("bottom").scale(s).ticks(2),u=d3.svg.axis().orient("left").scale(c).ticks(6);t.forEach(function(t){t.xValue=t.xValue,t.chart1=+t.chart1,t.chart2=+t.chart2});var f=d3.max(t,function(t){return t.chart2});s.domain(t.map(function(t){return t.xValue})),c.domain([0,f]),o.append("svg:g").attr("class","axis").attr("transform","translate("+i.left+","+(r-i.bottom)+")").call(d),o.append("svg:g").attr("class","axis").attr("transform","translate("+i.left+",0)").call(u),o.append("svg:g").attr("class","grid").attr("transform","translate("+i.left+",0)").call(e().tickSize(-l,0,0).tickFormat(""));var h=d3.svg.line().x(function(t){return s(t.xValue)}).y(function(t){return c(t.chart1)}),p=o.append("svg:path").attr("d",h(t)).attr("transform","translate("+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)+",0)").attr("stroke","#B8E986").attr("stroke-width",2).attr("fill","none"),m=p.node().getTotalLength();p.attr("stroke-dasharray",m+" "+m).attr("stroke-dashoffset",m).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0);var x=d3.svg.line().x(function(t){return s(t.xValue)}).y(function(t){return c(t.chart2)}),g=o.append("svg:path").attr("d",x(t)).attr("transform","translate("+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)+",0)").attr("stroke","#50E3C2").attr("stroke-width",2).attr("fill","none"),v=g.node().getTotalLength();g.attr("stroke-dasharray",v+" "+v).attr("stroke-dashoffset",v).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),o.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart1}).attr("r",4).attr("fill","#B8E986").attr("cx",function(a){return s(a.xValue)+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)}).attr("cy",function(t){return c(t.chart1)}).on("mouseover",function(t){var a=d3.mouse(n);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart1),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)}),o.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",4).attr("fill","#50E3C2").attr("cx",function(a){return s(a.xValue)+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)}).attr("cy",function(t){return c(t.chart2)}).on("mouseover",function(t){var a=d3.mouse(n);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart2),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)})},createLineChartRest=function(t,a){function e(){return d3.svg.axis().scale(d).orient("left").ticks(6)}if($(window).width()<768)var r=200;else var r=300;var n=d3.select("#main-content").node(),l=a,o=(d3.select("#linechart-rest").append("svg").attr("width",l+1).attr("height",r).attr("id","visualization"),d3.select("#visualization")),i={top:20,right:20,bottom:20,left:34},s=d3.scale.ordinal().rangeRoundBands([0,l-50],0),c=d3.scale.ordinal().rangeRoundBands([0,l],1.07),d=d3.scale.linear().range([r-i.top,i.bottom]),u=d3.svg.axis().orient("bottom").scale(s).ticks(2),f=d3.svg.axis().orient("left").scale(d).ticks(6);t.forEach(function(t){t.xValue=t.xValue,t.chart1=+t.chart1,t.chart2=+t.chart2});var h=d3.max(t,function(t){return t.chart2});s.domain(t.map(function(t){return t.xValue})),c.domain(t.map(function(t){return t.xValue})),d.domain([0,h]),o.append("svg:g").attr("class","axis").attr("transform","translate("+i.left+","+(r-i.bottom)+")").call(u),o.append("svg:g").attr("class","axis").attr("transform","translate("+i.left+",0)").call(f),o.append("svg:g").attr("class","grid").attr("transform","translate("+i.left+",0)").call(e().tickSize(-l,0,0).tickFormat(""));var p=d3.svg.line().x(function(t){return s(t.xValue)}).y(function(t){return d(t.chart2)});if(t.length>1){var m=o.append("svg:path").attr("d",p(t)).attr("transform","translate("+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)+",0)").attr("stroke","#B8E986").attr("stroke-width",2).attr("fill","none"),x=m.node().getTotalLength();m.attr("stroke-dasharray",x+" "+x).attr("stroke-dashoffset",x).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),o.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",4).attr("fill","#B8E986").attr("cx",function(a){return s(a.xValue)+((s(t[0].xValue)+s(t[1].xValue))/2+i.left)}).attr("cy",function(t){return d(t.chart2)}).on("mouseover",function(t){var a=d3.mouse(n);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart2),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)})}else 1===t.length?o.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",4).attr("fill","#B8E986").attr("cx",function(t){return c(t.xValue)}).attr("cy",function(t){return d(t.chart2)}).on("mouseover",function(t){var a=d3.mouse(n);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart2),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)}):o.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",4).attr("fill","#B8E986").attr("cx",function(t){return c(t.xValue)}).attr("cy",function(t){return d(t.chart2)}).on("mouseover",function(t){var a=d3.mouse(n);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart2),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)})},createBarChartProcuring=function(t,a,e,r,n){if($(window).width()<768)var l=12,o=37,i=21;else var l=20,o=55,i=32;var s,c,d,u=d3.max(t,function(t){return t.value}),f="#"+a,h=r,p=o*t.length;d3.select("#main").node();$(f).html(""),s=d3.select(f).append("svg").attr("class","chart").attr("width",h).attr("height",p),c=d3.scale.linear().domain([0,u]).range([0,h-151]),d=d3.scale.ordinal().rangeBands([0,p]),s.selectAll("rect").data(t).enter().append("rect").attr("x",170).attr("y",function(a,e){return e*(p/t.length)}).attr("class",function(t){if(null!==t.name)return"name"}).attr("height",o-l).on("click",function(t){if(null!==t.name)return window.location.assign(window.location.origin+"/"+e+"/"+t.name)}).attr("width",0).transition().duration(900).ease("linear").attr("width",function(t){return c(t.value)}).attr("x",170),s.selectAll("text.value").data(t).enter().append("text").text(function(t){return"amount"===n?d3.format(",")(Math.round(t.value))+" leu":d3.format(",")(Math.round(t.value))}).attr("y",function(a,e){return e*(p/t.length)}).attr("dx",173).attr("dy",o-i).attr("class","value").on("click",function(t){if(null!==t.name)return window.location.assign(window.location.origin+"/"+e+"/"+t.name)}).attr("id",function(t,a){return t.name}),s.selectAll("text.name").data(t).enter().append("text").text(function(t){return null!=t.name?t.name.length>20?String(t.name).slice(0,21)+"...":String(t.name).slice(0,21):"N/A"}).attr("y",function(a,e){return e*(p/t.length)}).attr("dx",0).attr("dy",o-i).attr("class",function(t){if(null!==t.name)return"name"}).on("click",function(t){if(null!==t.name)return window.location.assign(window.location.origin+"/"+e+"/"+t.name)}).attr("id",function(t,a){return t.name})},createBarChartContract=function(t,a,e){function r(){return d3.svg.axis().scale(f).orient("left").ticks(5)}if($(window).width()<768)var n=200;else var n=300;var l=d3.select("#main-content").node(),o="#"+a,i=$(o).parent().width(),s={top:20,right:20,bottom:20,left:100},c=i-s.left-s.right,d=n-s.top-s.bottom,u=d3.scale.ordinal().rangeRoundBands([0,c],.35),f=d3.scale.linear().range([d,0]),h=d3.svg.axis().scale(u).orient("bottom"),p=d3.svg.axis().scale(f).orient("left").ticks(5),m=d3.select("#barChart-amount").append("svg").attr("width",c+s.left+1).attr("height",d+s.top+s.bottom).append("g").attr("transform","translate("+s.left+","+s.top+")");t.forEach(function(t){t.name=t.name,t.value=+t.value}),u.domain(t.map(function(t){return t.name})),f.domain([0,d3.max(t,function(t){return t.value})]),m.append("g").attr("class","x axis").attr("transform","translate(0,"+d+")").call(h).selectAll("text").style("text-anchor","end").attr("dx","1em").attr("dy",".75em"),m.append("g").attr("class","y axis").call(p).append("text").attr("y",6).attr("dy",".71em"),m.append("svg:g").attr("class","grid").attr("transform","translate(0,0)").call(r().tickSize(-c,0,0).tickFormat("")),m.selectAll("bar").data(t).enter().append("rect").attr("class","bars").attr("x",function(t){return u(t.name)}).attr("width",u.rangeBand()).attr("y",d).attr("height",0).transition().duration(900).ease("linear").attr("y",function(t){return f(t.value)}).attr("height",function(t){return t.value<0?d-f(0):d-f(t.value)}),m.selectAll("rect").on("mousemove",function(t){var a=d3.mouse(l);d3.select("#tooltip-no-tip").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.value),d3.select("#tooltip-no-tip").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-no-tip").classed("hide",!0)})},createLineChartONHeader=function(t,a,e){function r(){return d3.svg.axis().scale(d).orient("left").ticks(6)}if($(window).width()<768)var n=200;else var n=250;var l=d3.select("#main-content").node(),o=a,i=(d3.select("#header-linechart").append("svg").attr("width",o+1).attr("height",n).attr("id","visualization"),d3.select("#visualization")),s={top:20,right:20,bottom:20,left:40},c=d3.scale.ordinal().rangeRoundBands([0,o-50],0),d=d3.scale.linear().range([n-s.top,s.bottom]),u=d3.svg.axis().orient("bottom").scale(c).ticks(2),f=d3.svg.axis().orient("left").scale(d).ticks(6);t.forEach(function(t){t.xValue=t.xValue,t.chart1=+t.chart1,t.chart2=+t.chart2});var h=d3.max(t,function(t){return t.chart2});c.domain(t.map(function(t){return t.xValue})),d.domain([0,h]),i.append("svg:g").attr("class","axis").attr("transform","translate("+s.left+","+(n-s.bottom)+")").call(u),i.append("svg:g").attr("class","axis").attr("transform","translate("+s.left+",0)").call(f),i.append("svg:g").attr("class","grid").attr("transform","translate("+s.left+",0)").call(r().tickSize(-o,0,0).tickFormat(""));var p=d3.svg.line().x(function(t){return c(t.xValue)}).y(function(t){return d(t.chart2)}),m=i.append("svg:path").attr("d",p(t)).attr("transform","translate("+((c(t[0].xValue)+c(t[1].xValue))/2+s.left)+",0)").attr("stroke",e).attr("stroke-width",2).attr("fill","none"),x=m.node().getTotalLength();m.attr("stroke-dasharray",x+" "+x).attr("stroke-dashoffset",x).transition().duration(1e3).ease("linear").attr("stroke-dashoffset",0),i.selectAll("dot").data(t).enter().append("circle").filter(function(t){return t.chart2}).attr("r",4).attr("fill",e).attr("cx",function(a){return c(a.xValue)+((c(t[0].xValue)+c(t[1].xValue))/2+s.left)}).attr("cy",function(t){return d(t.chart2)}).on("mouseover",function(t){var a=d3.mouse(l);d3.select("#tooltip-wrap").style("left",a[0]+"px").style("top",a[1]+"px").select("#value").attr("text-anchor","middle").html(t.chart2),d3.select("#tooltip-wrap").classed("hide",!1)}).on("mouseout",function(t){d3.select("#tooltip-wrap").classed("hide",!0)})};